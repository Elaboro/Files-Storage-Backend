# Files Storage REST API
**[[EN](https://github.com/Elaboro/Files-Storage-REST-API#readme)]**


## Описание
Демонстрационный REST API, который может обмениваться файлами через CDN. Так же может работать с своим локальным хранилищем.

Реализована простейшая авторизация и регистрация (JWT). После авторизации можно загружать файлы которые будут сжаты, зашифрованы (переданным ключём шифрования) и помещены на диск (или сохранены в удалённом хранилище через FTP). Так же будет сохранена некоторая мета информация. Загруженные файлы можно скачать по полученному идентификатору и ключу, они будут расшифрованы и без сжатия.
Так же файл можно удалить, передав его идентификатор. Вместе с ним будет удалена и мета информация о файле.

## Для запуска приложения

Создайте `.dev.env` и заполните:
```
PORT=
POSTGRES_HOST=
POSTGRES_PORT=
POSTGRES_USERNAME=
POSTGRES_PASSWORD=
POSTGRES_DATABASE=
COMPOSE_PGADMIN_DEFAULT_EMAIL=
COMPOSE_PGADMIN_DEFAULT_PASSWORD=
JWT_SECRET_KEY=
STORAGE_LOCAL=true
CDN_PROVIDER_DOMAIN=
CDN_URL=
FTP_HOST=
FTP_PORT=
FTP_USER=
FTP_PASSWORD=
```


## Документация REST API

- **POST** */auth/register*

>Создать новый аккаунт, передав параметры:
>
>**username** - имя пользователя.
>
>**password** - пароль.
>
>**email** - электронная почта.
>
>В ответ приходит токен.

- **POST** */auth/login*

>Авторизоваться, передав:
>
>**username** | **email** - зарегистрированный логин или почту.
>
>**password** - пароль.
>
>В ответ приходит токен.

- **GET** */storage*

>Вернёт массив с идентификатором, названием файла и именем пользователя, загрузившего его.

### Доступ после авторизации по токену JWT:

- **POST** */storage/upload*


>Отправить файлы, передавая в теле ключ 32 байта (aes-256-ctr).
>
>В ответе приходит массив из идентификаторов.

- **GET** */storage/download/id/**{id}**/key/**{key}***


>Загрузить файл, передав параметры:
>
>**id** - идентификатор загруженного файла.
>
>**key** - ключ (32 байта), используемый во время отправки файла.

- **DELETE** */storage/delete/**{id}***


>Удалить файл, передав параметр:
>**id** - ид загруженного файла.
